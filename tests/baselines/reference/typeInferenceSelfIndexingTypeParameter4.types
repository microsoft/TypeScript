//// [tests/cases/compiler/typeInferenceSelfIndexingTypeParameter4.ts] ////

=== typeInferenceSelfIndexingTypeParameter4.ts ===
declare function f1<T>(
>f1 : <T>(arg: { [K in keyof T]: T[K][keyof T[K]]; }) => T
>   : ^ ^^   ^^                                     ^^^^^ 

  arg: {
>arg : { [K in keyof T]: T[K][keyof T[K]]; }
>    : ^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    [K in keyof T]: T[K][keyof T[K]];
  }
): T;

const res1 = f1({
>res1 : { a: Record<string | number | symbol, string>; b: Record<string | number | symbol, number>; }
>     : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>f1({  a: "hello",  b: 100,}) : { a: Record<string | number | symbol, string>; b: Record<string | number | symbol, number>; }
>                             : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>f1 : <T>(arg: { [K in keyof T]: T[K][keyof T[K]]; }) => T
>   : ^ ^^   ^^                                     ^^^^^ 
>{  a: "hello",  b: 100,} : { a: string; b: number; }
>                         : ^^^^^^^^^^^^^^^^^^^^^^^^^

  a: "hello",
>a : string
>  : ^^^^^^
>"hello" : "hello"
>        : ^^^^^^^

  b: 100,
>b : number
>  : ^^^^^^
>100 : 100
>    : ^^^

});

type Inner<O> = {
>Inner : Inner<O>
>      : ^^^^^^^^

  [I in keyof O]: O[I][keyof O[I]];
};

declare function f2<T>(fields: {
>f2 : <T>(fields: { [K in keyof T]: { label: string; values: Inner<T[K]>; }; }) => T
>   : ^ ^^      ^^                                                            ^^^^^ 
>fields : { [K in keyof T]: { label: string; values: Inner<T[K]>; }; }
>       : ^^^ ^^^^^^^^^^^^^^^^^^^^^^^      ^^^^^^^^^^           ^^^^^^

  [K in keyof T]: {
    label: string;
>label : string
>      : ^^^^^^

    values: Inner<T[K]>;
>values : Inner<T[K]>
>       : ^^^^^^^^^^^

  };
}): T;

const res2 = f2({
>res2 : { prop: { foo: Record<string | number | symbol, number>; bar: Record<string | number | symbol, boolean>; }; other: { baz: Record<string | number | symbol, string>; qwe: Record<string | number | symbol, boolean[]>; }; }
>     : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>f2({  prop: {    label: "first",    values: {      foo: 123,      bar: true,    },  },  other: {    label: "second",    values: {      baz: "",      qwe: [true],    },  },}) : { prop: { foo: Record<string | number | symbol, number>; bar: Record<string | number | symbol, boolean>; }; other: { baz: Record<string | number | symbol, string>; qwe: Record<string | number | symbol, boolean[]>; }; }
>                                                                                                                                                                              : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>f2 : <T>(fields: { [K in keyof T]: { label: string; values: Inner<T[K]>; }; }) => T
>   : ^ ^^      ^^                                                            ^^^^^ 
>{  prop: {    label: "first",    values: {      foo: 123,      bar: true,    },  },  other: {    label: "second",    values: {      baz: "",      qwe: [true],    },  },} : { prop: { label: string; values: { foo: number; bar: true; }; }; other: { label: string; values: { baz: string; qwe: true[]; }; }; }
>                                                                                                                                                                          : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  prop: {
>prop : { label: string; values: { foo: number; bar: true; }; }
>     : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>{    label: "first",    values: {      foo: 123,      bar: true,    },  } : { label: string; values: { foo: number; bar: true; }; }
>                                                                          : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    label: "first",
>label : string
>      : ^^^^^^
>"first" : "first"
>        : ^^^^^^^

    values: {
>values : { foo: number; bar: true; }
>       : ^^^^^^^^^^^^^^^^^^^^^^^^^^^
>{      foo: 123,      bar: true,    } : { foo: number; bar: true; }
>                                      : ^^^^^^^^^^^^^^^^^^^^^^^^^^^

      foo: 123,
>foo : number
>    : ^^^^^^
>123 : 123
>    : ^^^

      bar: true,
>bar : true
>    : ^^^^
>true : true
>     : ^^^^

    },
  },
  other: {
>other : { label: string; values: { baz: string; qwe: true[]; }; }
>      : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>{    label: "second",    values: {      baz: "",      qwe: [true],    },  } : { label: string; values: { baz: string; qwe: true[]; }; }
>                                                                            : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    label: "second",
>label : string
>      : ^^^^^^
>"second" : "second"
>         : ^^^^^^^^

    values: {
>values : { baz: string; qwe: true[]; }
>       : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>{      baz: "",      qwe: [true],    } : { baz: string; qwe: true[]; }
>                                       : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

      baz: "",
>baz : string
>    : ^^^^^^
>"" : ""
>   : ^^

      qwe: [true],
>qwe : true[]
>    : ^^^^^^
>[true] : true[]
>       : ^^^^^^
>true : true
>     : ^^^^

    },
  },
});


declare function f3<T>(
>f3 : <T>(arg: { [K in keyof T]: { a: T[K][keyof T[K] & "A"]; b: T[K][keyof T[K] & "B"]; }; }) => T
>   : ^ ^^   ^^                                                                              ^^^^^ 

  arg: {
>arg : { [K in keyof T]: { a: T[K][keyof T[K] & "A"]; b: T[K][keyof T[K] & "B"]; }; }
>    : ^^^ ^^^^^^^^^^^^^^^^^^^                      ^^^^^                      ^^^^^^

    [K in keyof T]: {
      a: T[K][keyof T[K] & "A"];
>a : T[K][keyof T[K] & "A"]
>  : ^^^^^^^^^^^^^^^^^^^^^^

      b: T[K][keyof T[K] & "B"];
>b : T[K][keyof T[K] & "B"]
>  : ^^^^^^^^^^^^^^^^^^^^^^
    }
  }
): T;

const res3 = f3({
>res3 : { x: Record<"A", string> & Record<"B", number>; y: Record<"A", number> & Record<"B", string>; }
>     : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>f3({  x: {    a: "foo",    b: 42,  },  y: {    a: 100,    b: "bar",  },}) : { x: Record<"A", string> & Record<"B", number>; y: Record<"A", number> & Record<"B", string>; }
>                                                                          : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>f3 : <T>(arg: { [K in keyof T]: { a: T[K][keyof T[K] & "A"]; b: T[K][keyof T[K] & "B"]; }; }) => T
>   : ^ ^^   ^^                                                                              ^^^^^ 
>{  x: {    a: "foo",    b: 42,  },  y: {    a: 100,    b: "bar",  },} : { x: { a: string; b: number; }; y: { a: number; b: string; }; }
>                                                                      : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  x: {
>x : { a: string; b: number; }
>  : ^^^^^^^^^^^^^^^^^^^^^^^^^
>{    a: "foo",    b: 42,  } : { a: string; b: number; }
>                            : ^^^^^^^^^^^^^^^^^^^^^^^^^

    a: "foo",
>a : string
>  : ^^^^^^
>"foo" : "foo"
>      : ^^^^^

    b: 42,
>b : number
>  : ^^^^^^
>42 : 42
>   : ^^

  },
  y: {
>y : { a: number; b: string; }
>  : ^^^^^^^^^^^^^^^^^^^^^^^^^
>{    a: 100,    b: "bar",  } : { a: number; b: string; }
>                             : ^^^^^^^^^^^^^^^^^^^^^^^^^

    a: 100,
>a : number
>  : ^^^^^^
>100 : 100
>    : ^^^

    b: "bar",
>b : string
>  : ^^^^^^
>"bar" : "bar"
>      : ^^^^^

  },
});

